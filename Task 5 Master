#include <Wire.h>

#define SLAVE_ADDR 0x08 // Address of Board B
const int buttonPin = 2;
const int ledPin = 8;

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);
  pinMode(ledPin, OUTPUT);
  Wire.begin(); // Join I2C bus as master
}

void loop() {
  // ---- SEND BUTTON STATE TO SLAVE ----
  byte buttonState = (digitalRead(buttonPin) == LOW) ? 0x01 : 0x00;
  Wire.beginTransmission(SLAVE_ADDR);
  Wire.write(buttonState);
  Wire.endTransmission();

  // ---- REQUEST BUTTON STATE FROM SLAVE ----
  Wire.requestFrom(SLAVE_ADDR, 1);
  if (Wire.available()) {
    byte received = Wire.read();
    digitalWrite(ledPin, received ? HIGH : LOW);
  }

  delay(50); // small delay for stability
}
